<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home</title>

    <style>
        body {
            margin: 0;
            min-height: 100vh;
            font-family: Arial, sans-serif;
            color: white;
            background-size: cover;
            background-position: center;
            transition: background-image 0.3s ease;
        }

        body.music-mode {
            background-image: url("/images/home.jpg");
        }

        body.movie-mode {
            background-image: url("/images/cinema.jpg");
        }

        /* TOP BAR */
        .top-bar {
            display: flex;
            justify-content: space-between;
            padding: 12px 20px;
            background: rgba(0,0,0,0.6);
        }

        .nav-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            color: white;
            border-radius: 6px;
            text-decoration: none;
            border: none;
            cursor: pointer;
        }

        .logout-btn {
            background: rgba(255,80,80,0.4);
        }

        /* PLAYER */
        .player-container {
            width: 460px;
            margin: 60px auto;
            background: rgba(0,0,0,0.6);
            padding: 20px;
            border-radius: 12px;
        }

        iframe {
            width: 100%;
            height: 240px;
            border-radius: 8px;
            border: none;
        }

        .player-header {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .player-header button {
            flex: 1;
            padding: 8px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }

        .playlist {
            list-style: none;
            padding: 0;
            margin: 12px 0;
            max-height: 180px;
            overflow-y: auto;
        }

        .playlist li {
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .controls {
            display: flex;
            gap: 6px;
        }

        .controls button {
            flex: 1;
            padding: 10px;
            background: rgba(255,255,255,0.25);
            border: none;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }
    </style>
</head>

<body class="music-mode">

<!-- TOP BAR -->
<div class="top-bar">
    <div style="display: flex; gap: 10px;">
        <a th:href="@{/market}" class="nav-btn">Market</a>
        <a th:href="@{/wallet}" class="nav-btn">Wallet</a>
        <a th:href="@{/settings}" class="nav-btn">Settings</a>
    </div>

    <form th:action="@{/logout}" method="post">
        <button class="nav-btn logout-btn">Logout</button>
    </form>
</div>

<!-- PLAYER -->
<div class="player-container">

    <!-- MODE BUTTONS -->
    <div class="player-header">
        <button onclick="switchToMusic()">Music</button>
        <button onclick="switchToMovies()">Movies</button>
    </div>

    <!-- YOUTUBE PLAYER (ВИНАГИ ВИДИМ) -->
    <iframe
            src="https://www.youtube.com/embed/dQw4w9WgXcQ"
            allow="autoplay; encrypted-media"
            allowfullscreen>
    </iframe>

    <!-- PLAYLIST (МОЖЕ ДА Е ПРАЗЕН) -->
    <ul class="playlist" id="playlist">
        <!-- JS ще я пълни -->
    </ul>

    <!-- CONTROLS -->
    <div class="controls">
        <button>⏮</button>
        <button>▶</button>
        <button>⏸</button>
        <button>⏭</button>
    </div>
</div>

<script>
    const musicList = [];
    const movieList = [];

    function renderList(list) {
        const ul = document.getElementById("playlist");
        ul.innerHTML = "";

        if (list.length === 0) {
            const li = document.createElement("li");
            li.textContent = "Няма налично съдържание";
            ul.appendChild(li);
            return;
        }

        list.forEach(item => {
            const li = document.createElement("li");
            li.textContent = item;
            ul.appendChild(li);
        });
    }

    function switchToMusic() {
        document.body.classList.remove("movie-mode");
        document.body.classList.add("music-mode");
        renderList(musicList);
    }

    function switchToMovies() {
        document.body.classList.remove("music-mode");
        document.body.classList.add("movie-mode");
        renderList(movieList);
    }

    // INIT
    switchToMusic();
</script>

</body>
</html>